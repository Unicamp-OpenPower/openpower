<!DOCTYPE html>
<html lang="en-us">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 4.4.0">

  

  
  
  
  
  
  

  

  
  
  
    
  
  <meta name="description" content="Continuous integration allows code to be tested automatically every time it’s changed, detecting errors as early as possible. In this tutorial a CI using a GitHub repository will be approached.
Step 1: Installing and setting up Jenkins and Git To install Jenkins, execute the following commands:
wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add - sudo sh -c &#39;echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#39; sudo apt-get update sudo apt-get install jenkins  To install git, simply execute:">

  
  <link rel="alternate" hreflang="en-us" href="/post/building-a-continuous-integration-platform-using-jenkins-and-github/">

  


  

  
  
  
  <meta name="theme-color" content="#2962ff">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.0/css/all.css" integrity="sha384-aOkxzJ5uQz7WBObEZcHvV5JvRW3TUc2rNPA7pe3AwnsUohiw1Vj2Rgx2KSOkF5+h" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css" crossorigin="anonymous" title="hl-light">
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/dracula.min.css" crossorigin="anonymous" title="hl-dark" disabled>
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono&display=swap">
  

  
  
  
  <link rel="stylesheet" href="/css/academic.min.dd629241ea9333c62c071f4a25f829ff.css">

  

  
  
  

  

  <link rel="manifest" href="/index.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon-32.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/building-a-continuous-integration-platform-using-jenkins-and-github/">

  
  
  
  
    
    
  
  
  <meta property="twitter:card" content="summary">
  
  <meta property="og:site_name" content="OpenPOWER@UNICAMP">
  <meta property="og:url" content="/post/building-a-continuous-integration-platform-using-jenkins-and-github/">
  <meta property="og:title" content="Building a continuous integration platform using Jenkins and GitHub | OpenPOWER@UNICAMP">
  <meta property="og:description" content="Continuous integration allows code to be tested automatically every time it’s changed, detecting errors as early as possible. In this tutorial a CI using a GitHub repository will be approached.
Step 1: Installing and setting up Jenkins and Git To install Jenkins, execute the following commands:
wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add - sudo sh -c &#39;echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list&#39; sudo apt-get update sudo apt-get install jenkins  To install git, simply execute:"><meta property="og:image" content="/img/icon-192.png">
  <meta property="twitter:image" content="/img/icon-192.png"><meta property="og:locale" content="en-us">
  
    
      <meta property="article:published_time" content="2016-06-15T00:00:00&#43;00:00">
    
    <meta property="article:modified_time" content="2016-06-15T00:00:00&#43;00:00">
  

  


  





  <title>Building a continuous integration platform using Jenkins and GitHub | OpenPOWER@UNICAMP</title>

</head>

<body id="top" data-spy="scroll" data-offset="70" data-target="#TableOfContents" >

  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


  
<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0 compensate-for-scrollbar" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">OpenPOWER@UNICAMP</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav mr-auto">
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#projects"><span>Projects</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#people"><span>People</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#talks"><span>Talks</span></a>
        </li>

        
        

        

        
        
        
          
        

        
        
        
        
        
        
          
          
          
            
          
          
        

        <li class="nav-item">
          <a class="nav-link " href="/#posts"><span>Posts</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="http://openpower.ic.unicamp.br/minicloud/" target="_blank" rel="noopener"><span>Minicloud</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="https://oplab9.parqtec.unicamp.br/" target="_blank" rel="noopener"><span>FTP</span></a>
        </li>

        
        

        

        
        
        
          
            
          
        

        
        
        
        
        
        

        <li class="nav-item">
          <a class="nav-link " href="http://openpowerfoundation.org/" target="_blank" rel="noopener"><span>OpenPOWER Foundation</span></a>
        </li>

        
        

      
      </ul>
      <ul class="navbar-nav ml-auto">
      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        

      </ul>

    </div>
  </div>
</nav>


  <article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">Building a continuous integration platform using Jenkins and GitHub</h1>

  

  
    



<meta content="2016-06-15 00:00:00 &#43;0000 UTC" itemprop="datePublished">
<meta content="2016-06-15 00:00:00 &#43;0000 UTC" itemprop="dateModified">

<div class="article-metadata">

  
  

  
  <span class="article-date">
    
    
      
    
    <time>Jun 15, 2016</time>
  </span>
  

  

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    4 min read
  </span>
  

  
  
  

  
  

  
    
<div class="share-box" aria-hidden="true">
  <ul class="share">
    
      
      
      
        
      
      
      
      <li>
        <a href="https://twitter.com/intent/tweet?url=/post/building-a-continuous-integration-platform-using-jenkins-and-github/&amp;text=Building%20a%20continuous%20integration%20platform%20using%20Jenkins%20and%20GitHub" target="_blank" rel="noopener" class="share-btn-twitter">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.facebook.com/sharer.php?u=/post/building-a-continuous-integration-platform-using-jenkins-and-github/&amp;t=Building%20a%20continuous%20integration%20platform%20using%20Jenkins%20and%20GitHub" target="_blank" rel="noopener" class="share-btn-facebook">
          <i class="fab fa-facebook-f"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="mailto:?subject=Building%20a%20continuous%20integration%20platform%20using%20Jenkins%20and%20GitHub&amp;body=/post/building-a-continuous-integration-platform-using-jenkins-and-github/" target="_blank" rel="noopener" class="share-btn-email">
          <i class="fas fa-envelope"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://www.linkedin.com/shareArticle?url=/post/building-a-continuous-integration-platform-using-jenkins-and-github/&amp;title=Building%20a%20continuous%20integration%20platform%20using%20Jenkins%20and%20GitHub" target="_blank" rel="noopener" class="share-btn-linkedin">
          <i class="fab fa-linkedin-in"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://web.whatsapp.com/send?text=Building%20a%20continuous%20integration%20platform%20using%20Jenkins%20and%20GitHub%20/post/building-a-continuous-integration-platform-using-jenkins-and-github/" target="_blank" rel="noopener" class="share-btn-whatsapp">
          <i class="fab fa-whatsapp"></i>
        </a>
      </li>
    
      
      
      
        
      
      
      
      <li>
        <a href="https://service.weibo.com/share/share.php?url=/post/building-a-continuous-integration-platform-using-jenkins-and-github/&amp;title=Building%20a%20continuous%20integration%20platform%20using%20Jenkins%20and%20GitHub" target="_blank" rel="noopener" class="share-btn-weibo">
          <i class="fab fa-weibo"></i>
        </a>
      </li>
    
  </ul>
</div>


  

</div>

    














  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      

<p>Continuous integration allows code to be tested automatically every time it’s changed, detecting errors as early as possible. In this tutorial a CI using a GitHub repository will be approached.</p>

<h1 id="step-1-installing-and-setting-up-jenkins-and-git">Step 1: Installing and setting up Jenkins and Git</h1>

<p>To install Jenkins, execute the following commands:</p>

<pre><code>wget -q -O - https://pkg.jenkins.io/debian/jenkins-ci.org.key | sudo apt-key add -
sudo sh -c 'echo deb http://pkg.jenkins.io/debian-stable binary/ &gt; /etc/apt/sources.list.d/jenkins.list'
sudo apt-get update
sudo apt-get install jenkins
</code></pre>

<p>To install git, simply execute:</p>

<pre><code>sudo apt-get install git
</code></pre>

<p>Access Jenkins through <a href="http://localhost:8080" target="_blank">http://localhost:8080</a> and follow the instructions for the initial setup. Choose <strong>Install suggested plugins</strong> when asked.</p>

<p><img src="plugins.png" width="100%"/></p>

<h1 id="step-2-creating-a-job">Step 2: Creating a job</h1>

<p>In Jenkins dashboard, click on <strong>New Item</strong>, give your project a name and select <strong>Freestyle project</strong>.</p>

<p>You may choose <strong>Discard old builds</strong> in order to avoid using too much storage in the long term.</p>

<p>Check <strong>GitHub project</strong> and enter the GitHub URL of the project. Use the format <em><a href="https://github.com/YOUR-USERNAME/YOUR-REPOSITORY" target="_blank">https://github.com/YOUR-USERNAME/YOUR-REPOSITORY</a></em></p>

<p>In source code management section, choose <strong>Git</strong> and enter the repository URL the same way as above.</p>

<h2 id="step-2-1-choosing-the-build-trigger">Step 2.1: Choosing the build trigger</h2>

<p>Under <strong>Build Triggers</strong> it is possible to choose to build periodically or when a change is pushed into GitHub. Although building only when GitHub changes is more efficient, it is required to your Jenkins server to be accessible through the internet, and the you must own the repository. Building periodically may waste resources, but it is simpler to configure.</p>

<h3 id="step-2-1-1-build-periodically">Step 2.1.1: Build Periodically</h3>

<p>Check <strong>Build Periodically</strong> and define the period using the proper syntax found when clicking the <strong>?</strong>.</p>

<p>Complete the job creating by adding a build step (e.g. a shell script to compile and run a test) and jump to step 4</p>

<p>The test input and expected output should be in the repository.</p>

<h3 id="step-2-1-2-build-when-a-change-is-pushed-into-github">Step 2.1.2: Build when a change is pushed into GitHub</h3>

<p>Check build when a change is pushed into GitHub</p>

<p>Complete the job creating by adding a build step (e.g. a shell script to compile and run a test) and follow to step 3</p>

<p>The test input and expected output should be in the repository.</p>

<p><img src="job_configuration.png" width="100%"/></p>

<h1 id="step-3-configuring-github-plugin-skip-if-building-periodically">Step 3: Configuring GitHub plugin - Skip if building periodically</h1>

<p>Go to <strong>Manage Jenkins</strong> → <strong>Configure System</strong> → <strong>GitHub</strong> section → <strong>Advanced</strong> → <strong>Manage additional GitHub Actions</strong> → <strong>Convert login and password to token</strong></p>

<p>A new sub-section will appear right above.</p>

<p>Select <strong>From login and password</strong>, fill your login and password from GitHub and press <strong>Create token credentials</strong></p>

<p><img src="create_token.png" width="100%"/></p>

<p>Above this sub-section, click <strong>Add GitHub server</strong>. Keep the <strong>API URL</strong> unchanged.</p>

<p>Under <strong>Credentials</strong> dropdown menu, select the token just created and test your connection.</p>

<p><img src="github_server.png" width="100%"/></p>

<h1 id="step-4-testing-it">Step 4: Testing it</h1>

<p>If using periodical build, click the <strong>Build now</strong> icon to test. If the test fails, check the console output to find the issue (e.g. missing compiler).</p>

<p>If using GitHub trigger, change a file in the repository. The build should start automatically in a few seconds.</p>

<p>#Step 5: Adding slave machines - Optional</p>

<p>As your projects grow, you may run out of resources in your machine. A possible solution is to add one or more slave machines, which will be responsible for building your projects, while the current machine will become the master and manage everything (the master will still be able to run jobs if desired).</p>

<p>The slave machine doesn&rsquo;t need Jenkins installed on it. There are many ways to connect the slave with the master, here, SSH will be used.</p>

<p>Install Java and Git in the slave using:</p>

<pre><code>sudo apt-get install default-jre
sudo apt-get install git
</code></pre>

<p>Create a directory to be used by Jenkins, in this case will be the same path used by default in the master machine: /var/lib/jenkins</p>

<pre><code>sudo mkdir /var/lib/jenkins
</code></pre>

<p>Change the ownership of the directory to the same user used to login using SSH</p>

<pre><code>chown ubuntu:ubuntu /var/lib/jenkins
</code></pre>

<p>Back to the master machine:</p>

<p>Go to <strong>Manage Jenkins</strong> → <strong>Manage Nodes</strong> → <strong>New Node</strong></p>

<p>Name your node and select <strong>Permanent Agent</strong></p>

<p>The recommended <strong># of executors</strong> is the number of cores in the slave machine</p>

<p>The <strong>Remote root directory</strong> is the path to the directory created.</p>

<p>If necessary to divide the slave machines into different groups, label them (e.g. the OS running in the machine, the CPU architecture)</p>

<p>The <strong>Launch method</strong> used here will be SSH, but other methods are also fine.</p>

<p>Simply enter your host and create a credential using your username and password, or username and private key.</p>

<p>Press <strong>Save</strong></p>

<p><img src="slave_node.png" width="100%"/></p>

<p>##Step 5.1: Restricting machines where projects can be run</p>

<p>If your slaves have different environments, your should restrict the machines where each project will run.</p>

<p>Under the <strong>project</strong> settings, check <strong>Restrict where this project can be run</strong> and type the machine name, use a label, or even use a more complex rule using logical operators (click the <strong>?</strong> for more information)</p>

<p><img src="restrict_where_this_project_can_be_run.png" width="100%"/></p>

<p>To prevent the master machine to run projects, go to <strong>Manage Jenkins</strong> → <strong>Manage Nodes</strong> → <strong>master</strong> → <strong>Configure</strong> → <strong># of executors</strong> and set to 0.</p>

    </div>

    


    



    
      








  
  
  







      
      
    

    

    


  </div>
</article>

      

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js" integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js" integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js" integrity="sha256-aYTdUrn6Ow1DDgh5JTc3aDGnnju48y/1c8s1dgkYPQ8=" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/languages/r.min.js"></script>
        
      

      
      
    

    
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    

    
    
    
    
    
    
    
    
    
      
    
    
    
    
    <script src="/js/academic.min.16bbb3750feb7244c9bc409a5a4fe678.js"></script>

    






  
  <div class="container">
    <footer class="site-footer">
  

  <p class="powered-by">
    

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

  </div>
  

  
<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
